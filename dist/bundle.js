(()=>{let e,t=null,o=[],l=null;chrome.runtime.onMessage.addListener(((s,n,c)=>{console.log("Event listener executing");const{type:r,value:i}=s;"NEW"===r&&(console.log("Type: "+r+" Value: "+i),function(s,n){if(console.log("tabId: "+t),null===t){t=s,console.log(t);const c=function(){chrome.storage.local.set({timeStamps:[]}),e=document.getElementsByClassName("video-stream")[0];const t=document.querySelector('button[aria-label="Show transcript"]');if(t){const e=document.querySelector("div#panels.style-scope.ytd-watch-flexy");return e.style.display="flex",function(e,t){e.click(),new MutationObserver(((e,l)=>{const s=document.querySelector("#segments-container");if(s){const e=s.childNodes;t.style.display="none",l.disconnect(),function(e){let t="";for(let o=0;o<e.length;o++)null===e[o].getAttribute("hidden")&&(t+="::"+e[o].childNodes[2].ariaLabel.toLowerCase());o=t.split("::"),o.shift(),chrome.storage.local.set({timeStamps:o})}(e)}})).observe(t,{childList:!0,subtree:!0})}(t,e),l=!0,!0}return l=!1,!1}();console.log("Response: "+c),n({res:c})}else console.log("tabId: "+t+" timeStrampString: "+o),chrome.storage.local.set({timeStamps:o}),console.log("IsTrabscribible: "+l),n({res:l})}(i,c)),"PLAY"===r&&(e.currentTime=i)}))})();