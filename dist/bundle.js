chrome.runtime.onMessage.addListener(((e,o,t)=>{const{type:n,isVideoPage:r}=e;!function(e){setTimeout((()=>{const o=document.querySelector("ytd-app[darker-dark-theme]");if(console.log("Apply modifications running..."),!e)return void(o.style.border="none");let t,n=0,r=!1;const c=document.querySelector("div#description"),s=()=>{clearTimeout(t),n+=1,r||(document.querySelector('button[aria-label="Show transcript"]')?(o.style.border="10px solid red",console.log("Transcript Button Found"),i.disconnect(),r=!0,function(){console.log("Transcript Handler function running");document.querySelector('button[aria-label="Show transcript"]').click();const e=setInterval((()=>{console.log("Interval Running...");const o=document.querySelector("#segments-container");if(console.log("Segment_cont: "+o),o){const t=o.childNodes;document.querySelector("#panels").style.display="none",function(e){let o="";for(let t=0;t<e.length;t++)o+="::"+e[t].childNodes[2].ariaLabel.toLowerCase();const t=o.split("::");t.shift(),chrome.storage.local.set({timeStamps:t})}(t),clearInterval(e)}}),1e3)}()):n>=20?(console.log("Exceeded observation limit, disconnecting observer"),i.disconnect(),r=!0,o.style.border="none"):(console.log("Transcript button not found yet"),t=setTimeout(s,1e3)))},i=new MutationObserver((()=>{t=setTimeout(s,1e3)}));i.observe(c,{childList:!0,subtree:!0}),i.disconnect=()=>{r=!0,clearTimeout(t),MutationObserver.prototype.disconnect.call(i)}}),1e3)}(r)}));