(()=>{let e,t=null,o=[],s=null;function l(){chrome.storage.local.set({timeStamps:[]}),e=document.getElementsByClassName("video-stream")[0];const t=document.querySelector('button[aria-label="Show transcript"]');if(t){const e=document.querySelector("div#panels.style-scope.ytd-watch-flexy");return e.style.display="flex",function(e,t){e.click(),new MutationObserver(((e,s)=>{const l=document.querySelector("#segments-container");if(l){const e=l.childNodes;t.style.display="none",s.disconnect(),function(e){let t="";for(let o=0;o<e.length;o++)null===e[o].getAttribute("hidden")&&(t+="::"+e[o].childNodes[2].ariaLabel.toLowerCase());o=t.split("::"),o.shift(),chrome.storage.local.set({timeStamps:o})}(e)}})).observe(t,{childList:!0,subtree:!0})}(t,e),s=!0,!0}return s=!1,!1}chrome.runtime.onMessage.addListener(((n,c,r)=>{console.log("Event listener executing");const{type:i,value:a}=n;return"NEW"===i&&(console.log("Type: "+i+" Value: "+a),function(e,n){if(console.log("tabURL: "+t),null===t){t=e,console.log(t);const o=l();console.log("Response: "+o),n({res:o})}else if(t===e)console.log("tabURL: "+t+" timeStrampString: "+o),chrome.storage.local.set({timeStamps:o}),console.log("IsTrabscribible: "+s),n({res:s});else{t=e,console.log(t);const o=l();console.log("Response: "+o),n({res:o})}}(a,r)),"PLAY"===i&&(e.currentTime=a),!0}))})();