(()=>{let e;console.log("injected on to page");let o=null,t=[],s=null;function l(){chrome.storage.local.set({timeStamps:[]}),e=document.getElementsByClassName("video-stream")[0];const o=document.querySelector('button[aria-label="Show transcript"]');if(o){const e=document.querySelector("div#panels.style-scope.ytd-watch-flexy");return e.style.display="flex",function(e,o){e.click(),new MutationObserver(((e,s)=>{const l=document.querySelector("#segments-container");if(l){const e=l.childNodes;o.style.display="none",s.disconnect(),function(e){let o="";for(let t=0;t<e.length;t++)null===e[t].getAttribute("hidden")&&(o+="::"+e[t].childNodes[2].ariaLabel.toLowerCase());t=o.split("::"),t.shift(),chrome.storage.local.set({timeStamps:t})}(e)}})).observe(o,{childList:!0,subtree:!0})}(o,e),s=!0,!0}return s=!1,!1}chrome.runtime.onMessage.addListener(((n,c,r)=>{console.log("Event listener executing");const{type:i,value:a}=n;return"NEW"===i&&(console.log("IN NEW BLOCK"),console.log("Type: "+i+" Value: "+a),function(e,n){if(console.log("NEW HANDLER EXECUTING"),console.log("tabURL: "+o),null===o){o=e,console.log(o);const t=l();console.log("Response: "+t),n({res:t})}else if(o===e)console.log("tabURL: "+o+" timeStrampString: "+t),chrome.storage.local.set({timeStamps:t}),console.log("IsTrabscribible: "+s),n({res:s});else{o=e,console.log(o);const t=l();console.log("Response: "+t),n({res:t})}}(a,r)),"PLAY"===i&&(e.currentTime=a,r({message:"success"})),!0}))})();